<div class="container-child">

  <mat-toolbar color="accent">
    <mat-toolbar-row class="toolbar-list">
      <span class="span-toolbar-list">User Form</span>
      <span class="spacer-toolbar-list"></span>
      <div class="header-add-btn">
        <button (click)="back()" mat-raised-button>Back</button>
      </div>
    </mat-toolbar-row>
  </mat-toolbar>

  <div class="container-below">
    <mat-card class="mat-elevation-z4">
      <mat-card-content>
        <form class="form" [formGroup]="form">

          <mat-form-field class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <input matInput name="username" formControlName="username" required
              placeholder="Username" maxlength="50">
            <mat-error *ngIf="username.invalid && (username.dirty || username.touched)">
              <mat-error *ngIf="username.hasError('required')">
                Username is required
              </mat-error>
              <mat-error
                *ngIf="!username.hasError('required') && username.hasError('minlength')">
                Username min length is 3.
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <input matInput [type]="visibilityPass ? 'text' : 'password'" name="password" formControlName="password"
              (blur)="password.setValue(password.value ? password.value.trim() : '')"
              placeholder="Password" maxlength="50" [required]="!edit">
            <mat-icon matSuffix (click)="visibilityPass = !visibilityPass" class="cursor-pointer">
              {{ visibilityPass ? 'visibility_off' : 'visibility' }}
            </mat-icon>
            <mat-error *ngIf="password.invalid && (password.dirty || password.touched)">
              <mat-error *ngIf="password.hasError('required')">
                Password is required
              </mat-error>
              <mat-error
                *ngIf="!password.hasError('required') && password.hasError('minlength')">
                Password min length is 6
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <input matInput [type]="visibilityPassRepeat ? 'text' : 'password'"
              (blur)="confirmPassword.setValue(confirmPassword.value ? confirmPassword.value.trim() : '')"
              name="confirmPassword" formControlName="confirmPassword" maxlength="50"
              placeholder="Repeat Password" [required]="!edit">
            <mat-icon matSuffix (click)="visibilityPassRepeat = !visibilityPassRepeat" class="cursor-pointer">
              {{ visibilityPassRepeat ? 'visibility_off' : 'visibility' }}
            </mat-icon>
            <mat-error *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)">
              <mat-error *ngIf="confirmPassword.hasError('required')">
                Repeat Password min length is 6
              </mat-error>
              <mat-error *ngIf="!confirmPassword.hasError('required') && confirmPassword.hasError('mustMatch')">
                Repeat Password is not equal password
              </mat-error>
            </mat-error>
          </mat-form-field>
        </form>
      </mat-card-content>

      <mat-card-actions class="row card-actions">
        <button class="float-rigth-lg float-rigth-md btn-save-or-update" mat-raised-button
          [disabled]="!form.valid || isSaving" (click)="saveOrUpdate()">
          {{ (edit ? 'Update' : 'Save') }}
        </button>
        <button class="float-rigth-lg float-rigth-md btn-cancel" mat-raised-button (click)="back()">
          Cancel
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
